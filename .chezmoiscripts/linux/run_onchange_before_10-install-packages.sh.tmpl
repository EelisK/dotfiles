#!/bin/bash

{{ template "lib/logging" }}
{{ template "ensure-linux-distro" (list . "ubuntu" "debian") }}

{{- $sudo := includeTemplate "get-sudo" . }}
{{- $packages := list
        "autoconf"
        "bat"
        "btop"
        "build-essential"
        "docker-ce"
        "docker-ce-cli"
        "containerd.io"
        "docker-buildx-plugin"
        "docker-compose-plugin"
        "cmake"
        "curl"
        "fd-find"
        "fzf"
        "git"
        "git-lfs"
        "jq"
        "libfuse2"
        "libfreetype6-dev"
        "libfontconfig1-dev"
        "libxcb-xfixes0-dev"
        "libxkbcommon-dev"
        "libssl-dev"
        "libyaml-dev"
        "libreadline6-dev"
        "libgmp-dev"
        "libncurses5-dev"
        "libffi-dev"
        "libgdbm6"
        "libgdbm-dev"
        "libdb-dev"
        "patch"
        "pkg-config"
        "python3"
        "python3-dev"
        "python3-pip"
        "python3-setuptools"
        "ripgrep"
        "shellcheck"
        "tmux"
        "units"
        "uuid-dev"
        "zlib1g-dev"
        "zsh"
}}

set -eufo pipefail

log_task "[packages]"

log_step "[packages] Updating"
{{ $sudo }}apt-get update

log_step "[packages] Install - Start"
{{ $sudo }}apt-get install -y {{ $packages | join " " }}
log_step "[packages] Install - Complete"

log_done "[packages] Setup complete"
